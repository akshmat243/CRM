
{% extends 'base.html' %}  
{% block content %}
{% load static %}

<head>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.css">

    <style>
        #date-picker {
            width: 150px;
            margin-bottom: 10px;
            padding: 5px;
        }
        .ui-datepicker {
            z-index: 1000; 
        }

    </style>
</head>

    <div class="dashboard-main-body">
      <h6 class="text-center">Productivity Index</h6>
      <div class="d-flex flex-wrap align-items-center justify-content-between gap-3 mb-24">
    
        <ul class="d-flex align-items-center gap-2">
        <li class="fw-medium">
        </li>
      </div>


      <div class="col-xxl-12 pb-5">
       


    
      <div class="card h-100 p-0 radius-12">
          
          
        <div class="card-body p-24">
            <label for="date-picker">Select Date: </label>
            <input type="text" id="date-picker" name="date-picker" placeholder="Select a date">
    
            <div class="table-responsive scroll-sm">
                <table class="table bordered-table sm-table mb-0" id="myTable">
                    <thead>
                        <tr>
                            <th scope="col">SN</th>
                            <th scope="col">Name</th>
                            <th scope="col">Total Leads</th>
                            <th scope="col">Interested</th>
                            <th scope="col">Not Interested</th>
                            <th scope="col">Other Location</th>
                            <th scope="col">Not Picked</th>
                            <th scope="col">Lost</th>
                            <th scope="col">Visit</th>
                            <th scope="col">Visit %</th>
                            <th scope="col">Interested %</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for staff in staff_data %}
                        <tr>
                            <th scope="row">{{ forloop.counter }}</th>
                            <td>{{ staff.name }}</td>
                            <td class="text-center">{{ staff.total_leads }}</td>
                            <td class="bg-primary text-light text-center">{{ staff.interested }}</td>
                            <td class="bg-danger text-light text-center">{{ staff.not_interested }}</td>
                            <td class="text-center">{{ staff.other_location }}</td>
                            <td class="text-center">{{ staff.not_picked }}</td>
                            <td class="text-center">{{ staff.lost }}</td>
                            <td class="text-light bg-success text-center">{{ staff.visit }}</td>
                            <td class="text-center">{{ staff.visit_percentage }}%</td>
                            <td class="text-center">{{ staff.interested_percentage }}%</td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>
      </div>
    </div>
  </div>

  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>
  <script>
      $(function() {
          $("#date-picker").datepicker({
              dateFormat: 'yy-mm-dd',
              onSelect: function(dateText) {
                  window.location.href = "{% url 'productivity_index' %}?date=" + dateText;
              }
          });
      });
  </script>

  <script>
    function searchTable() {
      var input, filter, table, tr, td, i, txtValue;
      input = document.getElementById("searchInput");
      filter = input.value.toUpperCase();
      table = document.getElementById("myTable");
      tr = table.getElementsByTagName("tr");
  
      // Loop through all table rows, and hide those that don't match the search query
      for (i = 0; i < tr.length; i++) {
        var rowShouldBeVisible = false;
  
        // Loop through all cells of current row
        for (j = 0; j < tr[i].cells.length; j++) {
          td = tr[i].cells[j];
          if (td) {
            txtValue = td.textContent || td.innerText;
            if (txtValue.toUpperCase().indexOf(filter) > -1) {
              rowShouldBeVisible = true;
              break; // If a match is found in this row, no need to check further
            }
          }
        }
        if (rowShouldBeVisible) {
          tr[i].style.display = "";
        } else {
          tr[i].style.display = "none";
        }
      }
  
    }
  </script>
{% endblock %}

<!-- <div class="dashboard-main-body">
    <p class="text-center">Productivity Index</p>

    <table class="table bordered-table sm-table mb-0">
        <thead>
          <tr>
            <th scope="col">SN</th>
            <th scope="col">Name</th>
            <th scope="col">Total Leads</th>
            <th scope="col">Interested</th>
            <th scope="col">Not Interested</th>
            <th scope="col">Other Location</th>
            <th scope="col">Not Picked</th>
            <th scope="col">Lost</th>
            <th scope="col">Visit</th>
            <th scope="col">Visit %</th>
            <th scope="col">Interested %</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <th scope="row">1</th>
            <td>Staff1</td>
            <td class="text-center">50</td>
            <td class="bg-primary text-light text-center">20</td>
            <td class="bg-danger text-light text-center">20</td>
            <td class="text-center">10</td>
            <td class="text-center">10</td>
            <td class="text-center">5</td>
            <td class="text-light bg-success text-center">2</td>
            <td class="text-center">20</td>
            <td class="text-center">30</td>            
          </tr>
          <tr>
            <th scope="row">2</th>
            <td>Staff1</td>
            <td class="text-center">50</td>
            <td class="bg-primary text-light text-center">20</td>
            <td class="bg-danger text-light text-center">20</td>
            <td class="text-center">10</td>
            <td class="text-center">10</td>
            <td class="text-center">5</td>
            <td class="text-light bg-success text-center">2</td>
            <td class="text-center">20</td>
            <td class="text-center">30</td>
          </tr>
          <tr>
            <th scope="row">3</th>
            <td>Staff1</td>
            <td class="text-center">50</td>
            <td class="bg-primary text-light text-center">20</td>
            <td class="bg-danger text-light text-center">20</td>
            <td class="text-center">10</td>
            <td class="text-center">10</td>
            <td class="text-center">5</td>
            <td class="text-light bg-success text-center">2</td>
            <td class="text-center">20</td>
            <td class="text-center">30</td>
          </tr>
        </tbody>
      </table>
</div> -->

