{% extends request.user.is_superuser|yesno:'base.html,admin_dashboard/staff/base.html' %}  
{% block content %}
{% load static %}
    
    <div class="dashboard-main-body">

      <div class="dash-title"> <h6> Inquiry Records Lists</h6></div>

      <div class="card h-100 p-0 radius-12">
         <div class="card-header border-bottom bg-base py-16 px-24 d-flex align-items-center flex-wrap gap-3 justify-content-between">
              <!-- Search Form -->
                  <form class="navbar-search search_bar w-100">
                      <input type="text" id="searchInput" class="bg-base h-40-px form-control" name="search" placeholder="Search" onkeyup="searchTable()">
                      <iconify-icon icon="ion:search-outline" class="icon"></iconify-icon>
                  </form>

          </div>
          <div class="card-body p-24">
              <div class="table-responsive scroll-sm">
                <table class="table bordered-table sm-table mb-0" id="myTable">
                    <thead>
                      <tr>
                        <th>SR. NO</th>
                        <th>Class Name</th>
                        <th>Section Class</th>
                        <th>Class Incharge</th>
                      
                        <th>Status</th>
                        <th>Assgin By</th>
                          <th>Inquiry Status</th>
                        <th>Created Date</th>
                        <th>Action</th>
                      </tr>
                    </thead>
                    <tbody>
                    <tbody>
                      {% for qry in inquiry_data %}
                      <tr>
                        <td>{{ forloop.counter}}</td>
                        <td>{{ qry.full_name }}</td>
                        <td>{{ qry.contact_number }}</td>
                        <td>{{ qry.address }}</td>
                      
                        {% if qry.is_interested == True %}
                        <td style="color: rgb(42, 165, 134); font-weight: bold;">Interested</td>
                        {% else %}
                        <td style="color: rgb(95, 13, 13); font-weight: bold;">Not Interested</td>
                        {% endif %}
                        <td>{{ qry.assigned_user.name }}</td>
                          <td style="color:green;" >{{qry.inquiry_status}}</td>
                        <td>{{ qry.created_at|date:"d-M-Y" }}</td>
                        
                        {% if qry.is_interested == True %}
                        <td>
                          <a class="btn btn-outline-success btn-sm" href="{% url 'update_inquiry' qry.id %}"  ><i
                              class="bi bi-eye"></i>
                              View
                            </a>
                            {% if  request.user.delivery_manager %}
                            <a class="btn btn-outline-info btn-sm" onclick="updateStatus('{{ qry.id }}')">
                              <i class="bi bi-eye"></i>
                              Update Status
                            </a>
                            {% endif %}
                        </td>
                        {% endif %}
                        <td>
                        </td>
                    </td>
                      </tr>
                      {% endfor %}
                    </tbody>
                  </table>
              </div>
              <nav class="mt-3" aria-label="Page navigation example">
                <ul class="pagination">
                    <!-- First page link -->
                    <li class="page-item {% if not page.has_previous %}disabled{% endif %}">
                        <a class="page-link" href="?page=1" aria-label="First">
                            <span aria-hidden="true">&laquo;</span>
                        </a>
                    </li>
            
                    <!-- Previous page link -->
                    {% if page.has_previous %}
                        <li class="page-item">
                            <a class="page-link" href="?page={{ page.previous_page_number }}" aria-label="Previous">
                                <span aria-hidden="true">&lsaquo;</span>
                            </a>
                        </li>
                    {% endif %}
            
                    <!-- Page numbers -->
                    {% for num in page_range %}
                        {% if num == '...' %}
                            <li class="page-item disabled"><a class="page-link">...</a></li>
                        {% else %}
                            <li class="page-item {% if num == page.number %}active{% endif %}">
                                <a class="page-link" href="?page={{ num }}">{{ num }}</a>
                            </li>
                        {% endif %}
                    {% endfor %}
            
                    <!-- Next page link -->
                    {% if page.has_next %}
                        <li class="page-item">
                            <a class="page-link" href="?page={{ page.next_page_number }}" aria-label="Next">
                                <span aria-hidden="true">&rsaquo;</span>
                            </a>
                        </li>
                    {% endif %}
            
                    <!-- Last page link -->
                    <li class="page-item {% if not page.has_next %}disabled{% endif %}">
                        <a class="page-link" href="?page={{ page.paginator.num_pages }}" aria-label="Last">
                            <span aria-hidden="true">&raquo;</span>
                        </a>
                    </li>
                </ul> 
            </nav>
          </div>
        </div>
      </div>
    </div>
  </div>

{% endblock %}